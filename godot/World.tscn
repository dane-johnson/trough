[gd_scene load_steps=10 format=2]

[ext_resource path="res://world/PlayerManager.tscn" type="PackedScene" id=1]
[ext_resource path="res://Splitscreen.tscn" type="PackedScene" id=2]
[ext_resource path="res://environment/materials/grass.material" type="Material" id=3]
[ext_resource path="res://world/SpawnPoint.tscn" type="PackedScene" id=4]

[sub_resource type="BoxShape" id=1]
extents = Vector3( 50, 30, 1 )

[sub_resource type="CubeMesh" id=2]
size = Vector3( 100, 2, 100 )
subdivide_width = 10
subdivide_height = 10
subdivide_depth = 10

[sub_resource type="ConcavePolygonShape" id=3]
data = PoolVector3Array( -50, 1, 50, 50, 1, 50, -50, -1, 50, 50, 1, 50, 50, -1, 50, -50, -1, 50, 50, 1, -50, -50, 1, -50, 50, -1, -50, -50, 1, -50, -50, -1, -50, 50, -1, -50, 50, 1, 50, 50, 1, -50, 50, -1, 50, 50, 1, -50, 50, -1, -50, 50, -1, 50, -50, 1, -50, -50, 1, 50, -50, -1, -50, -50, 1, 50, -50, -1, 50, -50, -1, -50, 50, 1, 50, -50, 1, 50, 50, 1, -50, -50, 1, 50, -50, 1, -50, 50, 1, -50, -50, -1, 50, 50, -1, 50, -50, -1, -50, 50, -1, 50, 50, -1, -50, -50, -1, -50 )

[sub_resource type="ProceduralSky" id=4]
sky_top_color = Color( 0.941176, 0.647059, 0.945098, 1 )
sky_curve = 0.141225
ground_horizon_color = Color( 0.231373, 0.160784, 0.101961, 1 )
sun_energy = 0.71

[sub_resource type="Environment" id=5]
background_mode = 2
background_sky = SubResource( 4 )

[node name="World" type="Spatial"]

[node name="PlayerManager" parent="." instance=ExtResource( 1 )]
num_players = 2
spawn_points_node = NodePath("../SpawnPoints")

[node name="Splitscreen" parent="." instance=ExtResource( 2 )]
num_players = 2

[node name="Environment" type="Spatial" parent="."]

[node name="InvisibleWalls" type="StaticBody" parent="Environment"]
collision_layer = 8
collision_mask = 0

[node name="CollisionShape" type="CollisionShape" parent="Environment/InvisibleWalls"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -50 )
shape = SubResource( 1 )

[node name="CollisionShape2" type="CollisionShape" parent="Environment/InvisibleWalls"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 50 )
shape = SubResource( 1 )

[node name="CollisionShape3" type="CollisionShape" parent="Environment/InvisibleWalls"]
transform = Transform( -1.62921e-07, 0, 1, 0, 1, 0, -1, 0, -1.62921e-07, 50, 0, 0 )
shape = SubResource( 1 )

[node name="CollisionShape4" type="CollisionShape" parent="Environment/InvisibleWalls"]
transform = Transform( -1.62921e-07, 0, 1, 0, 1, 0, -1, 0, -1.62921e-07, -50, 0, 0 )
shape = SubResource( 1 )

[node name="Ground" type="MeshInstance" parent="Environment"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0 )
mesh = SubResource( 2 )
material/0 = ExtResource( 3 )

[node name="StaticBody" type="StaticBody" parent="Environment/Ground"]

[node name="CollisionShape" type="CollisionShape" parent="Environment/Ground/StaticBody"]
shape = SubResource( 3 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]
environment = SubResource( 5 )

[node name="SpawnPoints" type="Spatial" parent="."]

[node name="SpawnPoint" parent="SpawnPoints" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -41.0576, 3.8147e-06, -42.6472 )

[node name="SpawnPoint2" parent="SpawnPoints" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -42.4178, -3.8147e-06, 42.8378 )

[node name="SpawnPoint3" parent="SpawnPoints" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 45.11, 0, -44.6327 )

[node name="SpawnPoint4" parent="SpawnPoints" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 43.586, 0, 41.425 )
[connection signal="screens_created" from="Splitscreen" to="PlayerManager" method="start_game"]
